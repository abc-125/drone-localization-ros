<launch>

  <!-- defines name of the namespace of the drone -->
  <arg name="UAV_NAME" default="$(env UAV_NAME)" />
  <arg name="RUN_TYPE" default="$(env RUN_TYPE)" />

  <arg name="standalone" default="true" />

  <!-- will it run using GNU debugger? -->
  <arg name="debug" default="false" />
  <arg unless="$(arg debug)" name="launch_prefix_debug" value=""/>
  <arg     if="$(arg debug)" name="launch_prefix_debug" value="debug_roslaunch"/>

  <!-- will it run as standalone nodelet or using a nodelet manager? -->
  <arg name="manager" default="$(arg UAV_NAME)_edge_detector_manager" />
  <arg     if="$(arg standalone)" name="nodelet" value="standalone"/>
  <arg unless="$(arg standalone)" name="nodelet" value="load"/>
  <arg     if="$(arg standalone)" name="nodelet_manager" value=""/>
  <arg unless="$(arg standalone)" name="nodelet_manager" value="$(arg manager)"/>

  <!-- Namespace -->
  <group ns="$(arg UAV_NAME)">

  <arg name="input_images" default="/thermal/image_raw" />
  <arg name="camera_info" default="/thermal/camera_info" />
  <arg name="network_size" default="small" />
  <arg name="detection_threshold" default="0.5" />
  <arg name="no_detections_treshold" default="5" />
  <arg name="drone_width" default="0.3" />

  <arg name="config_small" default="$(find drone_localization_ros)/detectron2/configs/COCO-Detection/faster_rcnn_R_50_FPN_3x.yaml" />
  <arg name="model_small" default="$(find drone_localization_ros)/weights/t_resnet50_320x256.pth" />
  <arg name="config_large" default="$(find drone_localization_ros)/detectron2/configs/COCO-Detection/faster_rcnn_X_101_32x8d_FPN_3x.yaml" />
  <arg name="model_large" default="$(find drone_localization_ros)/weights/t_resnet101_880x680.pth" />

  <arg name="visualization" default="true" />

  <node name="drone_localization_ros"  pkg="drone_localization_ros" type="drone_localization_ros" output="screen" >
    <param name="input_images" value="$(arg input_images)" />
    <param name="camera_info" value="$(arg camera_info)" />
    <param name="network_size" value="$(arg network_size)" />
    <param name="detection_threshold" value="$(arg detection_threshold)" />
    <param name="no_detections_treshold" value="$(arg no_detections_treshold)" />
    <param name="drone_width" value="$(arg drone_width)" />
    <param name="config_small" value="$(arg config_small)" />
    <param name="model_small" value="$(arg model_small)" />
    <param name="config_large" value="$(arg config_large)" />
    <param name="model_large" value="$(arg model_large)" />
    <param name="visualization" value="$(arg visualization)" />
  </node>
  </group>
</launch>